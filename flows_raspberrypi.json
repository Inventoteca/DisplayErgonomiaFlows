[{"id":"7b532bf3.282a54","type":"tab","label":"LecturasContinuas","disabled":true,"info":""},{"id":"2da63df0.124802","type":"tab","label":"Flow 2","disabled":false,"info":""},{"id":"346374ca.eee81c","type":"tab","label":"ProbarUnaVez","disabled":false,"info":""},{"id":"f15c88c3.1d8bf8","type":"tab","label":"Mediciones Periódicas","disabled":false,"info":""},{"id":"cf4eb861.964c88","type":"tab","label":"Neopixel","disabled":false,"info":""},{"id":"20f5d70b.92ff78","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#09773e","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#097479","value":"#09773e","edited":true},"page-titlebar-backgroundColor":{"value":"#09773e","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0ebe63","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#09773e","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Display Ergonomía","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"5d2a389b.943628","type":"ui_tab","z":"","name":"Display Ergonomía","icon":"dashboard","disabled":false,"hidden":false},{"id":"a68eebc0.1d6ba8","type":"ui_group","z":"","name":"Neopixel","tab":"5d2a389b.943628","disp":true,"width":5,"collapse":false},{"id":"6596af46.e8855","type":"ui_group","z":"","name":"Luz","tab":"5d2a389b.943628","order":2,"disp":true,"width":"5","collapse":false},{"id":"e930afe6.376a6","type":"ui_group","z":"","name":"Temparatura y humedad","tab":"5d2a389b.943628","order":3,"disp":true,"width":"5","collapse":false},{"id":"6aa9a900.3e3e18","type":"i2c scan","z":"7b532bf3.282a54","name":"","busno":"1","x":280,"y":60,"wires":[["12076590.59432a"],[]]},{"id":"12076590.59432a","type":"debug","z":"7b532bf3.282a54","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":460,"y":60,"wires":[]},{"id":"69ad956b.d8fb7c","type":"inject","z":"7b532bf3.282a54","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":60,"wires":[["6aa9a900.3e3e18"]]},{"id":"aaf67c3d.0bb47","type":"ads1x15-raspi","z":"7b532bf3.282a54","property":"A0","name":"ADC0","chip":"IC_ADS1115","i2c_address":"ADDRESS_0x48","channel":"CHANNEL_0","samplesPerSecond0":"SPS_920","samplesPerSecond1":"SPS_860","progGainAmp":"PGA_4_096V","x":280,"y":180,"wires":[["3c5a696e.1a8c66"]]},{"id":"199b9fba.e5e24","type":"debug","z":"7b532bf3.282a54","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"A0.voltage","targetType":"msg","x":610,"y":140,"wires":[]},{"id":"cd9d7932.5025c8","type":"inject","z":"7b532bf3.282a54","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":180,"wires":[["aaf67c3d.0bb47"]]},{"id":"3c5a696e.1a8c66","type":"ads1x15-raspi","z":"7b532bf3.282a54","property":"A1","name":"ADC1","chip":"IC_ADS1115","i2c_address":"ADDRESS_0x48","channel":"CHANNEL_1","samplesPerSecond0":"SPS_920","samplesPerSecond1":"SPS_860","progGainAmp":"PGA_4_096V","x":420,"y":180,"wires":[["199b9fba.e5e24","c7c49774.2f5708"]]},{"id":"c7c49774.2f5708","type":"debug","z":"7b532bf3.282a54","name":"","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"A1.voltage","targetType":"msg","x":610,"y":220,"wires":[]},{"id":"1d34bb71.fd8b35","type":"inject","z":"7b532bf3.282a54","name":"","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":320,"wires":[["5312126e.bf821c"]]},{"id":"6c9e8727.9b7bd8","type":"debug","z":"7b532bf3.282a54","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":600,"y":320,"wires":[]},{"id":"847ce062.674c5","type":"tsl2561","z":"7b532bf3.282a54","address":57,"integ":"1","gain":"1","debugMode":false,"x":300,"y":420,"wires":[["fed3c5bd.6863b8"],["f75e66bf.a2d9f8"]]},{"id":"fed3c5bd.6863b8","type":"debug","z":"7b532bf3.282a54","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.lux","targetType":"msg","x":500,"y":400,"wires":[]},{"id":"24008de5.98cac2","type":"inject","z":"7b532bf3.282a54","name":"","topic":"","payload":"measure","payloadType":"str","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":420,"wires":[["847ce062.674c5"]]},{"id":"f75e66bf.a2d9f8","type":"debug","z":"7b532bf3.282a54","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":490,"y":440,"wires":[]},{"id":"5312126e.bf821c","type":"exec","z":"7b532bf3.282a54","command":"python3 /home/pi/dht.py","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"exec dht.py","x":280,"y":320,"wires":[["defb14fb.221378","775affe3.1bab"],[],[]]},{"id":"defb14fb.221378","type":"json","z":"7b532bf3.282a54","name":"","property":"payload","action":"","pretty":false,"x":440,"y":320,"wires":[["6c9e8727.9b7bd8"]]},{"id":"775affe3.1bab","type":"debug","z":"7b532bf3.282a54","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":460,"y":280,"wires":[]},{"id":"d795c66.b73f038","type":"exec","z":"2da63df0.124802","command":"python -u /home/pi/.node-red/projects/DisplayErgonomiaFlows/test.py","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"exec","x":420,"y":160,"wires":[["fa465555.fb8ca8"],[],[]]},{"id":"5dc5c8fa.d7ac68","type":"inject","z":"2da63df0.124802","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":160,"wires":[["d795c66.b73f038"]]},{"id":"fa465555.fb8ca8","type":"debug","z":"2da63df0.124802","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":580,"y":160,"wires":[]},{"id":"46588d70.a461b4","type":"comment","z":"2da63df0.124802","name":"Revisar la ruta del archivo py","info":"Revisar la ruta del archivo py","x":420,"y":100,"wires":[]},{"id":"264a75c6.69c19a","type":"i2c scan","z":"346374ca.eee81c","name":"","busno":"1","x":260,"y":40,"wires":[["2434ad50.c88422"],[]]},{"id":"2434ad50.c88422","type":"debug","z":"346374ca.eee81c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":440,"y":40,"wires":[]},{"id":"b8197975.172818","type":"inject","z":"346374ca.eee81c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":40,"wires":[["264a75c6.69c19a"]]},{"id":"5ff6a904.25f0e8","type":"tsl2561","z":"346374ca.eee81c","address":57,"integ":"0","gain":"0","debugMode":false,"x":290,"y":140,"wires":[["a1535852.a2e958","61ae5ec8.09e21"],["4985e84b.a80278"]]},{"id":"a1535852.a2e958","type":"debug","z":"346374ca.eee81c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.lux","targetType":"msg","x":500,"y":140,"wires":[]},{"id":"cdae4266.49ea5","type":"inject","z":"346374ca.eee81c","name":"","topic":"","payload":"measure","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":140,"wires":[["5ff6a904.25f0e8"]]},{"id":"4985e84b.a80278","type":"debug","z":"346374ca.eee81c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":490,"y":180,"wires":[]},{"id":"39b4f88.bf4e708","type":"inject","z":"346374ca.eee81c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":340,"wires":[["1a95060b.0a335a"]]},{"id":"1c1c227d.349a7e","type":"debug","z":"346374ca.eee81c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":570,"y":280,"wires":[]},{"id":"1a95060b.0a335a","type":"exec","z":"346374ca.eee81c","command":"python3 -u /home/pi/.node-red/projects/DisplayErgonomiaFlows/dht.py","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"exec dht.py","x":270,"y":340,"wires":[["c78bb582.3d99a8","8a7890af.4222a"],[],[]]},{"id":"c78bb582.3d99a8","type":"json","z":"346374ca.eee81c","name":"","property":"payload","action":"","pretty":false,"x":430,"y":340,"wires":[["1c1c227d.349a7e","c2887d4d.d3a45","4e53dbb5.e55a64"]]},{"id":"8a7890af.4222a","type":"debug","z":"346374ca.eee81c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":370,"y":280,"wires":[]},{"id":"89bb9876.262388","type":"rpi-neopixels","z":"cf4eb861.964c88","name":"","gpio":"12","pixels":"272","bgnd":"","fgnd":"","wipe":"0","mode":"pcent","rgb":"rgb","brightness":"45","gamma":true,"x":840,"y":240,"wires":[]},{"id":"91e5c8e1.4b91b8","type":"inject","z":"cf4eb861.964c88","name":"","topic":"","payload":"blue","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":850,"y":180,"wires":[["89bb9876.262388"]]},{"id":"eee436c3.edc508","type":"ads1x15-raspi","z":"346374ca.eee81c","property":"A0","name":"ADC0","chip":"IC_ADS1115","i2c_address":"ADDRESS_0x48","channel":"CHANNEL_0","samplesPerSecond0":"SPS_920","samplesPerSecond1":"SPS_860","progGainAmp":"PGA_4_096V","x":290,"y":840,"wires":[["d0d8f730.6c7b98"]]},{"id":"6697305a.9d172","type":"debug","z":"346374ca.eee81c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":true,"complete":"A0.voltage","targetType":"msg","x":620,"y":820,"wires":[]},{"id":"2e51494d.15c696","type":"inject","z":"346374ca.eee81c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":840,"wires":[["eee436c3.edc508"]]},{"id":"d0d8f730.6c7b98","type":"ads1x15-raspi","z":"346374ca.eee81c","property":"A1","name":"ADC1","chip":"IC_ADS1115","i2c_address":"ADDRESS_0x48","channel":"CHANNEL_1","samplesPerSecond0":"SPS_920","samplesPerSecond1":"SPS_860","progGainAmp":"PGA_4_096V","x":430,"y":840,"wires":[["6697305a.9d172","438d3d7a.c66ba4"]]},{"id":"438d3d7a.c66ba4","type":"debug","z":"346374ca.eee81c","name":"","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"A1.voltage","targetType":"msg","x":620,"y":880,"wires":[]},{"id":"5bd24565.8318dc","type":"function","z":"cf4eb861.964c88","name":"NeoMedicion PPM","func":"var num = msg.payload;\nvar col = msg.col;  // color para Wheel().\n\n//Editar acá\nvar numDigitos = 4;\nvar NeoMedicionFloor = 0; //¿En qué número de pixel comienza este número?\n\nvar NeoMedicionRoof = NeoMedicionFloor + numDigitos*16 - 1;\nvar overflowNum = Math.pow(10, numDigitos); //¿A partir de qué número ya no se puede mostrar en la NeoMedicion?\n\nvar numbers = [\n  0b11101110,    // 0\n  0b10001000,    // 1\n  0b01111100,    // 2    5555\n  0b11011100,    // 3   6    4\n  0b10011010,    // 4    3333\n  0b11010110,    // 5   2    0\n  0b11110110,    // 6    1111\n  0b10001100,    // 7\n  0b11111110,    // 8\n  0b10011110    // 9\n];\n\n//Cuántos segmentos ocupa cada número de día del mes\nvar segmDia = [0,2,5,5,4,5,6,3,7,6,8,4,7,7,6,7,8,5,9,8,11,7,10,10,9,10,11,8,12,11,11,7];\n//Suma total de segmentos iluminados hasta el día actual\nvar segmDiaTotal = [0,2,7,12,16,21,27,30,37,43,51,55,62,69,75,82,90,95,104,112,123,130,140,150,159,169,180,188,200,211,222,229];\n//var newsegmDia[]{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};\n\nvar fitNum; //Se usa para ajustar la cantidad de cifras que se pueden mostrar\nvar show0s = 0;\n\nif(num >= overflowNum)\n{ //Recorta para sólo mostrar la cifra que cabe en el display\n    fitNum = Math.floor(num/overflowNum);\n    fitNum = fitNum*overflowNum;\n    num = num - fitNum;\n}\n\nmsg.payload = NeoMedicionFloor + \",\" + NeoMedicionRoof + \",0,0,0\"  //Esto apaga todos los neopixel de la NeoMedicion\nnode.send(msg);\nnum = PuntoDecimal(num);\ndisplayNDigitoss2LEDxSegmento(num, col)\n\nfunction displayNDigitoss2LEDxSegmento(h, col)\n{\n  var millares = Math.floor(h / 1000);\n  var centenas = Math.floor((h % 1000)/100);\n  var decenas = Math.floor(((h%1000)%100)/ 10);\n  var unidades = Math.floor(((h%1000)%100)%10);\n\n  //var j = numPixAnio + numPixMes + numPixFechas; //Para la posicion del neopixel.\n  var j = NeoMedicionFloor + 1;  //Para la posicion del neopixel (Comienza después del punto)\n  var i = 0;  //Para el segmento del neoDígito\n  var jTemp;\n  \n  if(numDigitos>=1)\n  {\n  // -------------------------------------------- unidades\n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if (numbers[unidades] & (1 << 7 - i))\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n        \n    }\n    \n    j=j+2;\n  }\n  }\n  \n  if(numDigitos>=2)\n  {\n  //-------------------------------------------- decenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[decenas] & (1 << 7 - i)) && ((decenas >= 1) || (centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    \n   j=j+2;\n  }\n }\n  \n  if(numDigitos>=3)\n  {\n // ---------------------------------------- centenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[centenas] & (1 << 7 - i)) && ((centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n  j=j+2;\n }\n }\n  \n  if(numDigitos>=4)\n  {\n //---------------------------------------- millares\n j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n// msg.payload = j;\n// node.send(msg);\n \n  \n  for ( i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[millares] & (1 << 7 - i)) && (millares >= 1)) // Que sea diferente de cero\n      { \n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n      }\n      \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    j=j+2; //Posicion del Neopixel\n  }\n  }\n  \n  return;\n}\n\nfunction PuntoDecimal(num)\n{\n    var dondeDecimal = 0;\n    num = num.toString();\n    \n    for(var i = 0; i<num.length; i++)\n    {//Ojo, estamos asumiendo que no van a haber puntos en el primer lugar de la cadena. (P.e. \".1234\")\n     if(num[i] == \".\")\n     {\n        break; //Si halla el punto, se sale\n     }\n     else\n     {\n        dondeDecimal++; //Mientras no halle el punto, aumenta\n     }\n    }\n\n    if(dondeDecimal == num.length) \n    {\n        dondeDecimal = 0; //No hubo punto decimal en la cadena\n    }\n    else \n    {\n        //Acá encender el punto con el color indicado\n        msg.payload = (NeoMedicionFloor + 16*(numDigitos-dondeDecimal)) + \",\" + Wheel(col);\n        node.send(msg);\n        num = Math.floor(num * ((overflowNum/10) / (Math.pow(10, (dondeDecimal-1))))); //Recorre a la izquierda la cifra para hacerla \"entero\" para la siguiente función\n    } \n    \n    msg.dondeDecimal = dondeDecimal;\n    return num;\n    \n}\n\n\n//------------------------------------------------------------------------------displayAccidente\n// Esta función deberia mostrar los días sin accidentes en 4 displays de 7 segmentos\n// Esta función se utiliza si es una sola tira que se une a la salida de la Cruz\n/*\nfunction displayAccidente( h, col)\n{\n   var i;\n   var omitir = segmDiaTotal[h-1];  //Accede al arreglo segmDiaTotal una posicion anterior a la seleccionada para saber cuantos npx omitir\n   var mostrar = segmDia[h];        //Accede a este arreglo para saber el numero de leds a encender posteriormente en el ciclo for\n   for (i=0; i<mostrar; i++)\n   {\n    strip.setPixelColor(i+omitir, NivelAccidente(col));\n   }\n    strip.show();\n\n}\n*/\n\n\n//------------------------------------------------------------------------------NivelAccidente\n// Segun el nivel de accidente se cambia el color, el 0 defualt es verde, sin accidente\n/*\nfunction NivelAccidente(pos)\n{\n  switch (pos)\n  {\n    case 0:\n      return strip.Color(0,64,16);  //Verde, ¡¡ SI EL COLOR VERDE SE MANDA A 255 SE ATENUAN LOS AZULES !!\n      break;\n\n    case 1:\n      return strip.Color(128,32,0); //Naranja, hay problemas para mostrar el color naranja con los npx [naranja = ()]violeta = 193,0,255\n      break;\n\n    case 2:\n      return strip.Color(0,0,255);  //Azul\n      break;\n\n    case 3:\n      return strip.Color(64,64,0);//Amarillo255,195,0\n      break;\n\n    case 4:\n      return strip.Color(128,0,0);  //Rojo\n      break;\n\n    case 5:\n      return strip.Color(0,0,0);  //Apaga un numero\n      break;\n    }\n}\n*/\n\n//--- Input a value 0 to 255 to get a color value r - g - b - back to r\nfunction Wheel( WheelPos)\n{\n\n if (WheelPos == 0)\n  { //Para el color blanco\n    return \"200,255,200\";\n  }\n  \n else {\n  WheelPos = 255 - WheelPos;\n  if (WheelPos < 85 && WheelPos >0 )\n  {\n    return (255-WheelPos*3) + \",\" + 0 + \",\" + (WheelPos*3);\n  }\n  \n  else if (WheelPos < 170)\n  {\n    WheelPos -= 85;\n    return  0 + \",\" + (WheelPos*3) + \",\" + (255-WheelPos*3);\n  }\n  \n  else\n  {\n    WheelPos -= 170;\n    return (WheelPos*3) + \",\" + (255-WheelPos*3) + \",\" + 0;\n  }\n}\n}\n\nreturn;","outputs":1,"noerr":0,"x":610,"y":340,"wires":[["89bb9876.262388"]]},{"id":"60114df0.a12ed4","type":"inject","z":"cf4eb861.964c88","name":"","topic":"","payload":"20","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":180,"wires":[["d2fb3db1.65a25","5551f27b.22f20c"]]},{"id":"e9bf7a44.a76e78","type":"inject","z":"cf4eb861.964c88","name":"","topic":"","payload":"123.6","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":220,"wires":[["e9c02d1b.374c9","51f00b56.1030f4"]]},{"id":"10bf31c9.e35dae","type":"ui_chart","z":"346374ca.eee81c","name":"GraficaLux","group":"6596af46.e8855","order":2,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"4000","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":670,"y":100,"wires":[[]]},{"id":"61ae5ec8.09e21","type":"change","z":"346374ca.eee81c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.lux","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":100,"wires":[["10bf31c9.e35dae","902baea3.0c12d"]]},{"id":"902baea3.0c12d","type":"ui_text","z":"346374ca.eee81c","group":"6596af46.e8855","order":1,"width":0,"height":0,"name":"","label":"Lux","format":"{{msg.payload}}","layout":"row-spread","x":650,"y":60,"wires":[]},{"id":"1e8d02e9.36e05d","type":"ui_chart","z":"346374ca.eee81c","name":"GraficaTemp","group":"e930afe6.376a6","order":2,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":790,"y":320,"wires":[[]]},{"id":"11a5760.8ee598a","type":"ui_chart","z":"346374ca.eee81c","name":"GraficaHum","group":"e930afe6.376a6","order":4,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":790,"y":360,"wires":[[]]},{"id":"dc302b2f.008268","type":"ui_text","z":"346374ca.eee81c","group":"e930afe6.376a6","order":1,"width":0,"height":0,"name":"","label":"Temperatura","format":"{{msg.payload}}","layout":"row-spread","x":790,"y":280,"wires":[]},{"id":"d6034ded.a20ca","type":"ui_text","z":"346374ca.eee81c","group":"e930afe6.376a6","order":3,"width":0,"height":0,"name":"","label":"Humedad","format":"{{msg.payload}}","layout":"row-spread","x":780,"y":400,"wires":[]},{"id":"c2887d4d.d3a45","type":"change","z":"346374ca.eee81c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.t","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":320,"wires":[["1e8d02e9.36e05d","dc302b2f.008268"]]},{"id":"4e53dbb5.e55a64","type":"change","z":"346374ca.eee81c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.h","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":360,"wires":[["11a5760.8ee598a","d6034ded.a20ca"]]},{"id":"c5f19c06.38a9d","type":"inject","z":"346374ca.eee81c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":520,"wires":[["19c2ec03.530584"]]},{"id":"dd051877.0b04f8","type":"debug","z":"346374ca.eee81c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":570,"y":460,"wires":[]},{"id":"19c2ec03.530584","type":"exec","z":"346374ca.eee81c","command":"python3 -u /home/pi/.node-red/projects/DisplayErgonomiaFlows/uv.py","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"exec uv.py","x":270,"y":520,"wires":[["b0fcaee8.c5754","2c62c90b.8d5bd6"],[],[]]},{"id":"b0fcaee8.c5754","type":"json","z":"346374ca.eee81c","name":"","property":"payload","action":"","pretty":false,"x":430,"y":520,"wires":[["dd051877.0b04f8","891a6970.24d868","d4e54065.58f2b"]]},{"id":"2c62c90b.8d5bd6","type":"debug","z":"346374ca.eee81c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":370,"y":460,"wires":[]},{"id":"d24ebe9d.cedfb","type":"ui_chart","z":"346374ca.eee81c","name":"GraficaVoltsUV","group":"6596af46.e8855","order":4,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0.9","ymax":"3.1","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":800,"y":500,"wires":[[]]},{"id":"c8a7fa6d.4f3db8","type":"ui_chart","z":"346374ca.eee81c","name":"GraficaIntUV","group":"6596af46.e8855","order":6,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"16","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":790,"y":540,"wires":[[]]},{"id":"51a53e97.4749","type":"ui_text","z":"346374ca.eee81c","group":"6596af46.e8855","order":3,"width":0,"height":0,"name":"","label":"VoltsUV","format":"{{msg.payload}}","layout":"row-spread","x":780,"y":460,"wires":[]},{"id":"6f69b1ed.67095","type":"ui_text","z":"346374ca.eee81c","group":"6596af46.e8855","order":5,"width":0,"height":0,"name":"","label":"Intensidad mW/cm2","format":"{{msg.payload}}","layout":"row-spread","x":810,"y":580,"wires":[]},{"id":"891a6970.24d868","type":"change","z":"346374ca.eee81c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.v","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":500,"wires":[["d24ebe9d.cedfb","51a53e97.4749"]]},{"id":"d4e54065.58f2b","type":"change","z":"346374ca.eee81c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.i","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":540,"wires":[["c8a7fa6d.4f3db8","6f69b1ed.67095"]]},{"id":"adfa6e97.2ddbe","type":"inject","z":"cf4eb861.964c88","name":"off","topic":"","payload":"0,272,0,0,0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":340,"wires":[["89bb9876.262388"]]},{"id":"b23dbe62.90be7","type":"function","z":"cf4eb861.964c88","name":"NeoMedicion LUX","func":"var num = msg.payload;\nvar col = msg.col;  // color para Wheel().\n\n//Editar acá\nvar numDigitos = 4;\nvar NeoMedicionFloor = 64; //¿En qué número de pixel comienza este número?\n\nvar NeoMedicionRoof = NeoMedicionFloor + numDigitos*16 - 1;\nvar overflowNum = Math.pow(10, numDigitos); //¿A partir de qué número ya no se puede mostrar en la NeoMedicion?\n\nvar numbers = [\n  0b11101110,    // 0\n  0b10001000,    // 1\n  0b01111100,    // 2    5555\n  0b11011100,    // 3   6    4\n  0b10011010,    // 4    3333\n  0b11010110,    // 5   2    0\n  0b11110110,    // 6    1111\n  0b10001100,    // 7\n  0b11111110,    // 8\n  0b10011110    // 9\n];\n\n//Cuántos segmentos ocupa cada número de día del mes\nvar segmDia = [0,2,5,5,4,5,6,3,7,6,8,4,7,7,6,7,8,5,9,8,11,7,10,10,9,10,11,8,12,11,11,7];\n//Suma total de segmentos iluminados hasta el día actual\nvar segmDiaTotal = [0,2,7,12,16,21,27,30,37,43,51,55,62,69,75,82,90,95,104,112,123,130,140,150,159,169,180,188,200,211,222,229];\n//var newsegmDia[]{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};\n\nvar fitNum; //Se usa para ajustar la cantidad de cifras que se pueden mostrar\n\nif(num >= overflowNum)\n{ //Recorta para sólo mostrar la cifra que cabe en el display\n    fitNum = Math.floor(num/overflowNum);\n    fitNum = fitNum*overflowNum;\n    num = num - fitNum;\n}\n\nmsg.payload = NeoMedicionFloor + \",\" + NeoMedicionRoof + \",0,0,0\"  //Esto apaga todos los neopixel de la NeoMedicion\nnode.send(msg);\nnum = PuntoDecimal(num);\ndisplayNDigitoss2LEDxSegmento(num, col)\n\nfunction displayNDigitoss2LEDxSegmento(h, col)\n{\n  var millares = Math.floor(h / 1000);\n  var centenas = Math.floor((h % 1000)/100);\n  var decenas = Math.floor(((h%1000)%100)/ 10);\n  var unidades = Math.floor(((h%1000)%100)%10);\n\n  //var j = numPixAnio + numPixMes + numPixFechas; //Para la posicion del neopixel.\n  var j = NeoMedicionFloor + 1;  //Para la posicion del neopixel (Comienza después del punto)\n  var i = 0;  //Para el segmento del neoDígito\n  var jTemp;\n  \n  if(numDigitos>=1)\n  {\n  // -------------------------------------------- unidades\n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if (numbers[unidades] & (1 << 7 - i))\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n        \n    }\n    \n    j=j+2;\n  }\n  }\n  \n  if(numDigitos>=2)\n  {\n  //-------------------------------------------- decenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[decenas] & (1 << 7 - i)) && ((decenas >= 1) || (centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    \n   j=j+2;\n  }\n }\n  \n  if(numDigitos>=3)\n  {\n // ---------------------------------------- centenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[centenas] & (1 << 7 - i)) && ((centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n  j=j+2;\n }\n }\n  \n  if(numDigitos>=4)\n  {\n //---------------------------------------- millares\n j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n// msg.payload = j;\n// node.send(msg);\n \n  \n  for ( i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[millares] & (1 << 7 - i)) && (millares >= 1)) // Que sea diferente de cero\n      { \n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n      }\n      \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    j=j+2; //Posicion del Neopixel\n  }\n  }\n  \n  return;\n}\n\nfunction PuntoDecimal(num)\n{\n    var dondeDecimal = 0;\n    num = num.toString();\n    \n    for(var i = 0; i<num.length; i++)\n    {//Ojo, estamos asumiendo que no van a haber puntos en el primer lugar de la cadena. (P.e. \".1234\")\n     if(num[i] == \".\")\n     {\n        break; //Si halla el punto, se sale\n     }\n     else\n     {\n        dondeDecimal++; //Mientras no halle el punto, aumenta\n     }\n    }\n\n    if(dondeDecimal == num.length) \n    {\n        dondeDecimal = 0; //No hubo punto decimal en la cadena\n    }\n    else \n    {\n        //Acá encender el punto con el color indicado\n        msg.payload = (NeoMedicionFloor + 16*(numDigitos-dondeDecimal)) + \",\" + Wheel(col);\n        node.send(msg);\n        num = Math.floor(num * ((overflowNum/10) / (Math.pow(10, (dondeDecimal-1))))); //Recorre a la izquierda la cifra para hacerla \"entero\" para la siguiente función\n    } \n    \n    msg.dondeDecimal = dondeDecimal;\n    return num;\n    \n}\n\n\n//------------------------------------------------------------------------------displayAccidente\n// Esta función deberia mostrar los días sin accidentes en 4 displays de 7 segmentos\n// Esta función se utiliza si es una sola tira que se une a la salida de la Cruz\n/*\nfunction displayAccidente( h, col)\n{\n   var i;\n   var omitir = segmDiaTotal[h-1];  //Accede al arreglo segmDiaTotal una posicion anterior a la seleccionada para saber cuantos npx omitir\n   var mostrar = segmDia[h];        //Accede a este arreglo para saber el numero de leds a encender posteriormente en el ciclo for\n   for (i=0; i<mostrar; i++)\n   {\n    strip.setPixelColor(i+omitir, NivelAccidente(col));\n   }\n    strip.show();\n\n}\n*/\n\n\n//------------------------------------------------------------------------------NivelAccidente\n// Segun el nivel de accidente se cambia el color, el 0 defualt es verde, sin accidente\n/*\nfunction NivelAccidente(pos)\n{\n  switch (pos)\n  {\n    case 0:\n      return strip.Color(0,64,16);  //Verde, ¡¡ SI EL COLOR VERDE SE MANDA A 255 SE ATENUAN LOS AZULES !!\n      break;\n\n    case 1:\n      return strip.Color(128,32,0); //Naranja, hay problemas para mostrar el color naranja con los npx [naranja = ()]violeta = 193,0,255\n      break;\n\n    case 2:\n      return strip.Color(0,0,255);  //Azul\n      break;\n\n    case 3:\n      return strip.Color(64,64,0);//Amarillo255,195,0\n      break;\n\n    case 4:\n      return strip.Color(128,0,0);  //Rojo\n      break;\n\n    case 5:\n      return strip.Color(0,0,0);  //Apaga un numero\n      break;\n    }\n}\n*/\n\n//--- Input a value 0 to 255 to get a color value r - g - b - back to r\nfunction Wheel( WheelPos)\n{\n\n if (WheelPos == 0)\n  { //Para el color blanco\n    return \"200,255,200\";\n  }\n  \n else {\n  WheelPos = 255 - WheelPos;\n  if (WheelPos < 85 && WheelPos >0 )\n  {\n    return (255-WheelPos*3) + \",\" + 0 + \",\" + (WheelPos*3);\n  }\n  \n  else if (WheelPos < 170)\n  {\n    WheelPos -= 85;\n    return  0 + \",\" + (WheelPos*3) + \",\" + (255-WheelPos*3);\n  }\n  \n  else\n  {\n    WheelPos -= 170;\n    return (WheelPos*3) + \",\" + (255-WheelPos*3) + \",\" + 0;\n  }\n}\n}\n\nreturn;","outputs":1,"noerr":0,"x":610,"y":300,"wires":[["89bb9876.262388"]]},{"id":"51ba956f.687a6c","type":"function","z":"cf4eb861.964c88","name":"NeoMedicion DB","func":"var num = msg.payload;\nvar col = msg.col;  // color para Wheel().\n\n//Editar acá\nvar numDigitos = 3;\nvar NeoMedicionFloor = 64+64; //¿En qué número de pixel comienza este número?\n\nvar NeoMedicionRoof = NeoMedicionFloor + numDigitos*16 - 1;\nvar overflowNum = Math.pow(10, numDigitos); //¿A partir de qué número ya no se puede mostrar en la NeoMedicion?\n\nvar numbers = [\n  0b11101110,    // 0\n  0b10001000,    // 1\n  0b01111100,    // 2    5555\n  0b11011100,    // 3   6    4\n  0b10011010,    // 4    3333\n  0b11010110,    // 5   2    0\n  0b11110110,    // 6    1111\n  0b10001100,    // 7\n  0b11111110,    // 8\n  0b10011110    // 9\n];\n\n//Cuántos segmentos ocupa cada número de día del mes\nvar segmDia = [0,2,5,5,4,5,6,3,7,6,8,4,7,7,6,7,8,5,9,8,11,7,10,10,9,10,11,8,12,11,11,7];\n//Suma total de segmentos iluminados hasta el día actual\nvar segmDiaTotal = [0,2,7,12,16,21,27,30,37,43,51,55,62,69,75,82,90,95,104,112,123,130,140,150,159,169,180,188,200,211,222,229];\n//var newsegmDia[]{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};\n\nvar fitNum; //Se usa para ajustar la cantidad de cifras que se pueden mostrar\n\nif(num >= overflowNum)\n{ //Recorta para sólo mostrar la cifra que cabe en el display\n    fitNum = Math.floor(num/overflowNum);\n    fitNum = fitNum*overflowNum;\n    num = num - fitNum;\n}\n\nmsg.payload = NeoMedicionFloor + \",\" + NeoMedicionRoof + \",0,0,0\"  //Esto apaga todos los neopixel de la NeoMedicion\nnode.send(msg);\nnum = PuntoDecimal(num);\ndisplayNDigitoss2LEDxSegmento(num, col)\n\nfunction displayNDigitoss2LEDxSegmento(h, col)\n{\n  var millares = Math.floor(h / 1000);\n  var centenas = Math.floor((h % 1000)/100);\n  var decenas = Math.floor(((h%1000)%100)/ 10);\n  var unidades = Math.floor(((h%1000)%100)%10);\n\n  //var j = numPixAnio + numPixMes + numPixFechas; //Para la posicion del neopixel.\n  var j = NeoMedicionFloor + 1;  //Para la posicion del neopixel (Comienza después del punto)\n  var i = 0;  //Para el segmento del neoDígito\n  var jTemp;\n  \n  if(numDigitos>=1)\n  {\n  // -------------------------------------------- unidades\n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if (numbers[unidades] & (1 << 7 - i))\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n        \n    }\n    \n    j=j+2;\n  }\n  }\n  \n  if(numDigitos>=2)\n  {\n  //-------------------------------------------- decenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[decenas] & (1 << 7 - i)) && ((decenas >= 1) || (centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    \n   j=j+2;\n  }\n }\n  \n  if(numDigitos>=3)\n  {\n // ---------------------------------------- centenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[centenas] & (1 << 7 - i)) && ((centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n  j=j+2;\n }\n }\n  \n  if(numDigitos>=4)\n  {\n //---------------------------------------- millares\n j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n// msg.payload = j;\n// node.send(msg);\n \n  \n  for ( i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[millares] & (1 << 7 - i)) && (millares >= 1)) // Que sea diferente de cero\n      { \n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n      }\n      \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    j=j+2; //Posicion del Neopixel\n  }\n  }\n  \n  return;\n}\n\nfunction PuntoDecimal(num)\n{\n    var dondeDecimal = 0;\n    num = num.toString();\n    \n    for(var i = 0; i<num.length; i++)\n    {//Ojo, estamos asumiendo que no van a haber puntos en el primer lugar de la cadena. (P.e. \".1234\")\n     if(num[i] == \".\")\n     {\n        break; //Si halla el punto, se sale\n     }\n     else\n     {\n        dondeDecimal++; //Mientras no halle el punto, aumenta\n     }\n    }\n\n    if(dondeDecimal == num.length) \n    {\n        dondeDecimal = 0; //No hubo punto decimal en la cadena\n    }\n    else \n    {\n        //Acá encender el punto con el color indicado\n        msg.payload = (NeoMedicionFloor + 16*(numDigitos-dondeDecimal)) + \",\" + Wheel(col);\n        node.send(msg);\n        num = Math.floor(num * ((overflowNum/10) / (Math.pow(10, (dondeDecimal-1))))); //Recorre a la izquierda la cifra para hacerla \"entero\" para la siguiente función\n    } \n    \n    msg.dondeDecimal = dondeDecimal;\n    return num;\n    \n}\n\n\n//------------------------------------------------------------------------------displayAccidente\n// Esta función deberia mostrar los días sin accidentes en 4 displays de 7 segmentos\n// Esta función se utiliza si es una sola tira que se une a la salida de la Cruz\n/*\nfunction displayAccidente( h, col)\n{\n   var i;\n   var omitir = segmDiaTotal[h-1];  //Accede al arreglo segmDiaTotal una posicion anterior a la seleccionada para saber cuantos npx omitir\n   var mostrar = segmDia[h];        //Accede a este arreglo para saber el numero de leds a encender posteriormente en el ciclo for\n   for (i=0; i<mostrar; i++)\n   {\n    strip.setPixelColor(i+omitir, NivelAccidente(col));\n   }\n    strip.show();\n\n}\n*/\n\n\n//------------------------------------------------------------------------------NivelAccidente\n// Segun el nivel de accidente se cambia el color, el 0 defualt es verde, sin accidente\n/*\nfunction NivelAccidente(pos)\n{\n  switch (pos)\n  {\n    case 0:\n      return strip.Color(0,64,16);  //Verde, ¡¡ SI EL COLOR VERDE SE MANDA A 255 SE ATENUAN LOS AZULES !!\n      break;\n\n    case 1:\n      return strip.Color(128,32,0); //Naranja, hay problemas para mostrar el color naranja con los npx [naranja = ()]violeta = 193,0,255\n      break;\n\n    case 2:\n      return strip.Color(0,0,255);  //Azul\n      break;\n\n    case 3:\n      return strip.Color(64,64,0);//Amarillo255,195,0\n      break;\n\n    case 4:\n      return strip.Color(128,0,0);  //Rojo\n      break;\n\n    case 5:\n      return strip.Color(0,0,0);  //Apaga un numero\n      break;\n    }\n}\n*/\n\n//--- Input a value 0 to 255 to get a color value r - g - b - back to r\nfunction Wheel( WheelPos)\n{\n\n if (WheelPos == 0)\n  { //Para el color blanco\n   return \"200,255,200\";\n  }\n  \n else {\n  WheelPos = 255 - WheelPos;\n  if (WheelPos < 85 && WheelPos >0 )\n  {\n    return (255-WheelPos*3) + \",\" + 0 + \",\" + (WheelPos*3);\n  }\n  \n  else if (WheelPos < 170)\n  {\n    WheelPos -= 85;\n    return  0 + \",\" + (WheelPos*3) + \",\" + (255-WheelPos*3);\n  }\n  \n  else\n  {\n    WheelPos -= 170;\n    return (WheelPos*3) + \",\" + (255-WheelPos*3) + \",\" + 0;\n  }\n}\n}\n\nreturn;","outputs":1,"noerr":0,"x":610,"y":260,"wires":[["89bb9876.262388"]]},{"id":"69fb09a0.acd498","type":"function","z":"cf4eb861.964c88","name":"NeoMedicion UV","func":"var num = msg.payload;\nvar col = msg.col;  // color para Wheel().\n\n//Editar acá\nvar numDigitos = 2;\nvar NeoMedicionFloor = 64+64+48; //¿En qué número de pixel comienza este número?\n\nvar NeoMedicionRoof = NeoMedicionFloor + numDigitos*16 - 1;\nvar overflowNum = Math.pow(10, numDigitos); //¿A partir de qué número ya no se puede mostrar en la NeoMedicion?\n\nvar numbers = [\n  0b11101110,    // 0\n  0b10001000,    // 1\n  0b01111100,    // 2    5555\n  0b11011100,    // 3   6    4\n  0b10011010,    // 4    3333\n  0b11010110,    // 5   2    0\n  0b11110110,    // 6    1111\n  0b10001100,    // 7\n  0b11111110,    // 8\n  0b10011110    // 9\n];\n\n//Cuántos segmentos ocupa cada número de día del mes\nvar segmDia = [0,2,5,5,4,5,6,3,7,6,8,4,7,7,6,7,8,5,9,8,11,7,10,10,9,10,11,8,12,11,11,7];\n//Suma total de segmentos iluminados hasta el día actual\nvar segmDiaTotal = [0,2,7,12,16,21,27,30,37,43,51,55,62,69,75,82,90,95,104,112,123,130,140,150,159,169,180,188,200,211,222,229];\n//var newsegmDia[]{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};\n\nvar fitNum; //Se usa para ajustar la cantidad de cifras que se pueden mostrar\n\nif(num >= overflowNum)\n{ //Recorta para sólo mostrar la cifra que cabe en el display\n    fitNum = Math.floor(num/overflowNum);\n    fitNum = fitNum*overflowNum;\n    num = num - fitNum;\n}\n\nmsg.payload = NeoMedicionFloor + \",\" + NeoMedicionRoof + \",0,0,0\"  //Esto apaga todos los neopixel de la NeoMedicion\nnode.send(msg);\nnum = PuntoDecimal(num);\ndisplayNDigitoss2LEDxSegmento(num, col)\n\nfunction displayNDigitoss2LEDxSegmento(h, col)\n{\n  var millares = Math.floor(h / 1000);\n  var centenas = Math.floor((h % 1000)/100);\n  var decenas = Math.floor(((h%1000)%100)/ 10);\n  var unidades = Math.floor(((h%1000)%100)%10);\n\n  //var j = numPixAnio + numPixMes + numPixFechas; //Para la posicion del neopixel.\n  var j = NeoMedicionFloor + 1;  //Para la posicion del neopixel (Comienza después del punto)\n  var i = 0;  //Para el segmento del neoDígito\n  var jTemp;\n  \n  if(numDigitos>=1)\n  {\n  // -------------------------------------------- unidades\n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if (numbers[unidades] & (1 << 7 - i))\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n        \n    }\n    \n    j=j+2;\n  }\n  }\n  \n  if(numDigitos>=2)\n  {\n  //-------------------------------------------- decenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[decenas] & (1 << 7 - i)) && ((decenas >= 1) || (centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    \n   j=j+2;\n  }\n }\n  \n  if(numDigitos>=3)\n  {\n // ---------------------------------------- centenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[centenas] & (1 << 7 - i)) && ((centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n  j=j+2;\n }\n }\n  \n  if(numDigitos>=4)\n  {\n //---------------------------------------- millares\n j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n// msg.payload = j;\n// node.send(msg);\n \n  \n  for ( i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[millares] & (1 << 7 - i)) && (millares >= 1)) // Que sea diferente de cero\n      { \n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n      }\n      \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    j=j+2; //Posicion del Neopixel\n  }\n  }\n  \n  return;\n}\n\nfunction PuntoDecimal(num)\n{\n    var dondeDecimal = 0;\n    num = num.toString();\n    \n    for(var i = 0; i<num.length; i++)\n    {//Ojo, estamos asumiendo que no van a haber puntos en el primer lugar de la cadena. (P.e. \".1234\")\n     if(num[i] == \".\")\n     {\n        break; //Si halla el punto, se sale\n     }\n     else\n     {\n        dondeDecimal++; //Mientras no halle el punto, aumenta\n     }\n    }\n\n    if(dondeDecimal == num.length) \n    {\n        dondeDecimal = 0; //No hubo punto decimal en la cadena\n    }\n    else \n    {\n        //Acá encender el punto con el color indicado\n        msg.payload = (NeoMedicionFloor + 16*(numDigitos-dondeDecimal)) + \",\" + Wheel(col);\n        node.send(msg);\n        num = Math.floor(num * ((overflowNum/10) / (Math.pow(10, (dondeDecimal-1))))); //Recorre a la izquierda la cifra para hacerla \"entero\" para la siguiente función\n    } \n    \n    msg.dondeDecimal = dondeDecimal;\n    return num;\n    \n}\n\n\n//------------------------------------------------------------------------------displayAccidente\n// Esta función deberia mostrar los días sin accidentes en 4 displays de 7 segmentos\n// Esta función se utiliza si es una sola tira que se une a la salida de la Cruz\n/*\nfunction displayAccidente( h, col)\n{\n   var i;\n   var omitir = segmDiaTotal[h-1];  //Accede al arreglo segmDiaTotal una posicion anterior a la seleccionada para saber cuantos npx omitir\n   var mostrar = segmDia[h];        //Accede a este arreglo para saber el numero de leds a encender posteriormente en el ciclo for\n   for (i=0; i<mostrar; i++)\n   {\n    strip.setPixelColor(i+omitir, NivelAccidente(col));\n   }\n    strip.show();\n\n}\n*/\n\n\n//------------------------------------------------------------------------------NivelAccidente\n// Segun el nivel de accidente se cambia el color, el 0 defualt es verde, sin accidente\n/*\nfunction NivelAccidente(pos)\n{\n  switch (pos)\n  {\n    case 0:\n      return strip.Color(0,64,16);  //Verde, ¡¡ SI EL COLOR VERDE SE MANDA A 255 SE ATENUAN LOS AZULES !!\n      break;\n\n    case 1:\n      return strip.Color(128,32,0); //Naranja, hay problemas para mostrar el color naranja con los npx [naranja = ()]violeta = 193,0,255\n      break;\n\n    case 2:\n      return strip.Color(0,0,255);  //Azul\n      break;\n\n    case 3:\n      return strip.Color(64,64,0);//Amarillo255,195,0\n      break;\n\n    case 4:\n      return strip.Color(128,0,0);  //Rojo\n      break;\n\n    case 5:\n      return strip.Color(0,0,0);  //Apaga un numero\n      break;\n    }\n}\n*/\n\n//--- Input a value 0 to 255 to get a color value r - g - b - back to r\nfunction Wheel( WheelPos)\n{\n\n if (WheelPos == 0)\n  { //Para el color blanco\n    return \"200,255,200\";\n  }\n  \n else {\n  WheelPos = 255 - WheelPos;\n  if (WheelPos < 85 && WheelPos >0 )\n  {\n    return (255-WheelPos*3) + \",\" + 0 + \",\" + (WheelPos*3);\n  }\n  \n  else if (WheelPos < 170)\n  {\n    WheelPos -= 85;\n    return  0 + \",\" + (WheelPos*3) + \",\" + (255-WheelPos*3);\n  }\n  \n  else\n  {\n    WheelPos -= 170;\n    return (WheelPos*3) + \",\" + (255-WheelPos*3) + \",\" + 0;\n  }\n}\n}\n\nreturn;","outputs":1,"noerr":0,"x":610,"y":220,"wires":[["89bb9876.262388"]]},{"id":"9f728678.a35e98","type":"function","z":"cf4eb861.964c88","name":"NeoMedicion HUM","func":"var num = msg.payload;\nvar col = msg.col;  // color para Wheel().\n\n//Editar acá\nvar numDigitos = 2;\nvar NeoMedicionFloor = 64+64+48+32; //¿En qué número de pixel comienza este número?\n\nvar NeoMedicionRoof = NeoMedicionFloor + numDigitos*16 - 1;\nvar overflowNum = Math.pow(10, numDigitos); //¿A partir de qué número ya no se puede mostrar en la NeoMedicion?\n\nvar numbers = [\n  0b11101110,    // 0\n  0b10001000,    // 1\n  0b01111100,    // 2    5555\n  0b11011100,    // 3   6    4\n  0b10011010,    // 4    3333\n  0b11010110,    // 5   2    0\n  0b11110110,    // 6    1111\n  0b10001100,    // 7\n  0b11111110,    // 8\n  0b10011110    // 9\n];\n\n//Cuántos segmentos ocupa cada número de día del mes\nvar segmDia = [0,2,5,5,4,5,6,3,7,6,8,4,7,7,6,7,8,5,9,8,11,7,10,10,9,10,11,8,12,11,11,7];\n//Suma total de segmentos iluminados hasta el día actual\nvar segmDiaTotal = [0,2,7,12,16,21,27,30,37,43,51,55,62,69,75,82,90,95,104,112,123,130,140,150,159,169,180,188,200,211,222,229];\n//var newsegmDia[]{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};\n\nvar fitNum; //Se usa para ajustar la cantidad de cifras que se pueden mostrar\n\nif(num >= overflowNum)\n{ //Recorta para sólo mostrar la cifra que cabe en el display\n    fitNum = Math.floor(num/overflowNum);\n    fitNum = fitNum*overflowNum;\n    num = num - fitNum;\n}\n\nmsg.payload = NeoMedicionFloor + \",\" + NeoMedicionRoof + \",0,0,0\"  //Esto apaga todos los neopixel de la NeoMedicion\nnode.send(msg);\nnum = PuntoDecimal(num);\ndisplayNDigitoss2LEDxSegmento(num, col)\n\nfunction displayNDigitoss2LEDxSegmento(h, col)\n{\n  var millares = Math.floor(h / 1000);\n  var centenas = Math.floor((h % 1000)/100);\n  var decenas = Math.floor(((h%1000)%100)/ 10);\n  var unidades = Math.floor(((h%1000)%100)%10);\n\n  //var j = numPixAnio + numPixMes + numPixFechas; //Para la posicion del neopixel.\n  var j = NeoMedicionFloor + 1;  //Para la posicion del neopixel (Comienza después del punto)\n  var i = 0;  //Para el segmento del neoDígito\n  var jTemp;\n  \n  if(numDigitos>=1)\n  {\n  // -------------------------------------------- unidades\n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if (numbers[unidades] & (1 << 7 - i))\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n        \n    }\n    \n    j=j+2;\n  }\n  }\n  \n  if(numDigitos>=2)\n  {\n  //-------------------------------------------- decenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[decenas] & (1 << 7 - i)) && ((decenas >= 1) || (centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    \n   j=j+2;\n  }\n }\n  \n  if(numDigitos>=3)\n  {\n // ---------------------------------------- centenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[centenas] & (1 << 7 - i)) && ((centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n  j=j+2;\n }\n }\n  \n  if(numDigitos>=4)\n  {\n //---------------------------------------- millares\n j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n// msg.payload = j;\n// node.send(msg);\n \n  \n  for ( i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[millares] & (1 << 7 - i)) && (millares >= 1)) // Que sea diferente de cero\n      { \n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n      }\n      \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    j=j+2; //Posicion del Neopixel\n  }\n  }\n  \n  return;\n}\n\nfunction PuntoDecimal(num)\n{\n    var dondeDecimal = 0;\n    num = num.toString();\n    \n    for(var i = 0; i<num.length; i++)\n    {//Ojo, estamos asumiendo que no van a haber puntos en el primer lugar de la cadena. (P.e. \".1234\")\n     if(num[i] == \".\")\n     {\n        break; //Si halla el punto, se sale\n     }\n     else\n     {\n        dondeDecimal++; //Mientras no halle el punto, aumenta\n     }\n    }\n\n    if(dondeDecimal == num.length) \n    {\n        dondeDecimal = 0; //No hubo punto decimal en la cadena\n    }\n    else \n    {\n        //Acá encender el punto con el color indicado\n        msg.payload = (NeoMedicionFloor + 16*(numDigitos-dondeDecimal)) + \",\" + Wheel(col);\n        node.send(msg);\n        num = Math.floor(num * ((overflowNum/10) / (Math.pow(10, (dondeDecimal-1))))); //Recorre a la izquierda la cifra para hacerla \"entero\" para la siguiente función\n    } \n    \n    msg.dondeDecimal = dondeDecimal;\n    return num;\n    \n}\n\n\n//------------------------------------------------------------------------------displayAccidente\n// Esta función deberia mostrar los días sin accidentes en 4 displays de 7 segmentos\n// Esta función se utiliza si es una sola tira que se une a la salida de la Cruz\n/*\nfunction displayAccidente( h, col)\n{\n   var i;\n   var omitir = segmDiaTotal[h-1];  //Accede al arreglo segmDiaTotal una posicion anterior a la seleccionada para saber cuantos npx omitir\n   var mostrar = segmDia[h];        //Accede a este arreglo para saber el numero de leds a encender posteriormente en el ciclo for\n   for (i=0; i<mostrar; i++)\n   {\n    strip.setPixelColor(i+omitir, NivelAccidente(col));\n   }\n    strip.show();\n\n}\n*/\n\n\n//------------------------------------------------------------------------------NivelAccidente\n// Segun el nivel de accidente se cambia el color, el 0 defualt es verde, sin accidente\n/*\nfunction NivelAccidente(pos)\n{\n  switch (pos)\n  {\n    case 0:\n      return strip.Color(0,64,16);  //Verde, ¡¡ SI EL COLOR VERDE SE MANDA A 255 SE ATENUAN LOS AZULES !!\n      break;\n\n    case 1:\n      return strip.Color(128,32,0); //Naranja, hay problemas para mostrar el color naranja con los npx [naranja = ()]violeta = 193,0,255\n      break;\n\n    case 2:\n      return strip.Color(0,0,255);  //Azul\n      break;\n\n    case 3:\n      return strip.Color(64,64,0);//Amarillo255,195,0\n      break;\n\n    case 4:\n      return strip.Color(128,0,0);  //Rojo\n      break;\n\n    case 5:\n      return strip.Color(0,0,0);  //Apaga un numero\n      break;\n    }\n}\n*/\n\n//--- Input a value 0 to 255 to get a color value r - g - b - back to r\nfunction Wheel( WheelPos)\n{\n\n if (WheelPos == 0)\n  { //Para el color blanco\n    return \"200,255,200\";\n  }\n  \n else {\n  WheelPos = 255 - WheelPos;\n  if (WheelPos < 85 && WheelPos >0 )\n  {\n    return (255-WheelPos*3) + \",\" + 0 + \",\" + (WheelPos*3);\n  }\n  \n  else if (WheelPos < 170)\n  {\n    WheelPos -= 85;\n    return  0 + \",\" + (WheelPos*3) + \",\" + (255-WheelPos*3);\n  }\n  \n  else\n  {\n    WheelPos -= 170;\n    return (WheelPos*3) + \",\" + (255-WheelPos*3) + \",\" + 0;\n  }\n}\n}\n\nreturn;","outputs":1,"noerr":0,"x":610,"y":180,"wires":[["89bb9876.262388"]]},{"id":"29a01286.52e89e","type":"function","z":"cf4eb861.964c88","name":"NeoMedicion TEM","func":"var num = msg.payload;\nvar col = msg.col;  // color para Wheel().\n\n//Editar acá\nvar numDigitos = 2;\nvar NeoMedicionFloor = 64+64+48+32+32; //¿En qué número de pixel comienza este número?\n\nvar NeoMedicionRoof = NeoMedicionFloor + numDigitos*16 - 1;\nvar overflowNum = Math.pow(10, numDigitos); //¿A partir de qué número ya no se puede mostrar en la NeoMedicion?\n\nvar numbers = [\n  0b11101110,    // 0\n  0b10001000,    // 1\n  0b01111100,    // 2    5555\n  0b11011100,    // 3   6    4\n  0b10011010,    // 4    3333\n  0b11010110,    // 5   2    0\n  0b11110110,    // 6    1111\n  0b10001100,    // 7\n  0b11111110,    // 8\n  0b10011110    // 9\n];\n\n//Cuántos segmentos ocupa cada número de día del mes\nvar segmDia = [0,2,5,5,4,5,6,3,7,6,8,4,7,7,6,7,8,5,9,8,11,7,10,10,9,10,11,8,12,11,11,7];\n//Suma total de segmentos iluminados hasta el día actual\nvar segmDiaTotal = [0,2,7,12,16,21,27,30,37,43,51,55,62,69,75,82,90,95,104,112,123,130,140,150,159,169,180,188,200,211,222,229];\n//var newsegmDia[]{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};\n\nvar fitNum; //Se usa para ajustar la cantidad de cifras que se pueden mostrar\n\nif(num >= overflowNum)\n{ //Recorta para sólo mostrar la cifra que cabe en el display\n    fitNum = Math.floor(num/overflowNum);\n    fitNum = fitNum*overflowNum;\n    num = num - fitNum;\n}\n\nmsg.payload = NeoMedicionFloor + \",\" + NeoMedicionRoof + \",0,0,0\"  //Esto apaga todos los neopixel de la NeoMedicion\nnode.send(msg);\nnum = PuntoDecimal(num);\ndisplayNDigitoss2LEDxSegmento(num, col)\n\nfunction displayNDigitoss2LEDxSegmento(h, col)\n{\n  var millares = Math.floor(h / 1000);\n  var centenas = Math.floor((h % 1000)/100);\n  var decenas = Math.floor(((h%1000)%100)/ 10);\n  var unidades = Math.floor(((h%1000)%100)%10);\n\n  //var j = numPixAnio + numPixMes + numPixFechas; //Para la posicion del neopixel.\n  var j = NeoMedicionFloor + 1;  //Para la posicion del neopixel (Comienza después del punto)\n  var i = 0;  //Para el segmento del neoDígito\n  var jTemp;\n  \n  if(numDigitos>=1)\n  {\n  // -------------------------------------------- unidades\n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if (numbers[unidades] & (1 << 7 - i))\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n        \n    }\n    \n    j=j+2;\n  }\n  }\n  \n  if(numDigitos>=2)\n  {\n  //-------------------------------------------- decenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[decenas] & (1 << 7 - i)) && ((decenas >= 1) || (centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    \n   j=j+2;\n  }\n }\n  \n  if(numDigitos>=3)\n  {\n // ---------------------------------------- centenas\n  j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n//  msg.payload = j;\n//  node.send(msg);\n  \n  for (i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[centenas] & (1 << 7 - i)) && ((centenas >= 1) || (millares >= 1))) //el cero no se muestra\n    {\n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n    }\n    \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n  j=j+2;\n }\n }\n  \n  if(numDigitos>=4)\n  {\n //---------------------------------------- millares\n j = j + 2; //Para saltar los dos puntos y los 14 segmentos del dígito previo\n// msg.payload = j;\n// node.send(msg);\n \n  \n  for ( i = 0; i < 7; i++)\n  {\n      jTemp = j + 1;\n      \n    if ((numbers[millares] & (1 << 7 - i)) && (millares >= 1)) // Que sea diferente de cero\n      { \n        msg.payload = j + \",\" + Wheel(col);\n        node.send(msg);\n        msg.payload = jTemp + \",\" + Wheel(col);\n        node.send(msg);\n      }\n      \n    else\n    {\n        msg.payload = j + \",0,0,0\";\n        node.send(msg);\n        msg.payload = jTemp + \",0,0,0\";\n        node.send(msg);\n    }\n    j=j+2; //Posicion del Neopixel\n  }\n  }\n  \n  return;\n}\n\nfunction PuntoDecimal(num)\n{\n    var dondeDecimal = 0;\n    num = num.toString();\n    \n    for(var i = 0; i<num.length; i++)\n    {//Ojo, estamos asumiendo que no van a haber puntos en el primer lugar de la cadena. (P.e. \".1234\")\n     if(num[i] == \".\")\n     {\n        break; //Si halla el punto, se sale\n     }\n     else\n     {\n        dondeDecimal++; //Mientras no halle el punto, aumenta\n     }\n    }\n\n    if(dondeDecimal == num.length) \n    {\n        dondeDecimal = 0; //No hubo punto decimal en la cadena\n    }\n    else \n    {\n        //Acá encender el punto con el color indicado\n        msg.payload = (NeoMedicionFloor + 16*(numDigitos-dondeDecimal)) + \",\" + Wheel(col);\n        node.send(msg);\n        num = Math.floor(num * ((overflowNum/10) / (Math.pow(10, (dondeDecimal-1))))); //Recorre a la izquierda la cifra para hacerla \"entero\" para la siguiente función\n    } \n    \n    msg.dondeDecimal = dondeDecimal;\n    return num;\n    \n}\n\n\n//------------------------------------------------------------------------------displayAccidente\n// Esta función deberia mostrar los días sin accidentes en 4 displays de 7 segmentos\n// Esta función se utiliza si es una sola tira que se une a la salida de la Cruz\n/*\nfunction displayAccidente( h, col)\n{\n   var i;\n   var omitir = segmDiaTotal[h-1];  //Accede al arreglo segmDiaTotal una posicion anterior a la seleccionada para saber cuantos npx omitir\n   var mostrar = segmDia[h];        //Accede a este arreglo para saber el numero de leds a encender posteriormente en el ciclo for\n   for (i=0; i<mostrar; i++)\n   {\n    strip.setPixelColor(i+omitir, NivelAccidente(col));\n   }\n    strip.show();\n\n}\n*/\n\n\n//------------------------------------------------------------------------------NivelAccidente\n// Segun el nivel de accidente se cambia el color, el 0 defualt es verde, sin accidente\n/*\nfunction NivelAccidente(pos)\n{\n  switch (pos)\n  {\n    case 0:\n      return strip.Color(0,64,16);  //Verde, ¡¡ SI EL COLOR VERDE SE MANDA A 255 SE ATENUAN LOS AZULES !!\n      break;\n\n    case 1:\n      return strip.Color(128,32,0); //Naranja, hay problemas para mostrar el color naranja con los npx [naranja = ()]violeta = 193,0,255\n      break;\n\n    case 2:\n      return strip.Color(0,0,255);  //Azul\n      break;\n\n    case 3:\n      return strip.Color(64,64,0);//Amarillo255,195,0\n      break;\n\n    case 4:\n      return strip.Color(128,0,0);  //Rojo\n      break;\n\n    case 5:\n      return strip.Color(0,0,0);  //Apaga un numero\n      break;\n    }\n}\n*/\n\n//--- Input a value 0 to 255 to get a color value r - g - b - back to r\nfunction Wheel( WheelPos)\n{\n\n if (WheelPos == 0)\n  { //Para el color blanco\n    return \"200,255,200\";\n  }\n  \n else {\n  WheelPos = 255 - WheelPos;\n  if (WheelPos < 85 && WheelPos >0 )\n  {\n    return (255-WheelPos*3) + \",\" + 0 + \",\" + (WheelPos*3);\n  }\n  \n  else if (WheelPos < 170)\n  {\n    WheelPos -= 85;\n    return  0 + \",\" + (WheelPos*3) + \",\" + (255-WheelPos*3);\n  }\n  \n  else\n  {\n    WheelPos -= 170;\n    return (WheelPos*3) + \",\" + (255-WheelPos*3) + \",\" + 0;\n  }\n}\n}\n\nreturn;","outputs":1,"noerr":0,"x":610,"y":140,"wires":[["89bb9876.262388"]]},{"id":"19d3012a.e81c0f","type":"tsl2561","z":"f15c88c3.1d8bf8","address":57,"integ":"0","gain":"0","debugMode":false,"x":430,"y":180,"wires":[["beb1392d.f6c8d8"],[]]},{"id":"3eb0bea5.7592e2","type":"inject","z":"f15c88c3.1d8bf8","name":"Cada 10s","topic":"","payload":"measure","payloadType":"str","repeat":"10","crontab":"","once":true,"onceDelay":"5","x":210,"y":180,"wires":[["19d3012a.e81c0f"]]},{"id":"5ec530ea.b0cbb","type":"inject","z":"f15c88c3.1d8bf8","name":"Cada minuto","topic":"","payload":"","payloadType":"str","repeat":"60","crontab":"","once":true,"onceDelay":"5","x":220,"y":380,"wires":[["418b850.a9f777c"]]},{"id":"418b850.a9f777c","type":"exec","z":"f15c88c3.1d8bf8","command":"python3 -u /home/pi/.node-red/projects/DisplayErgonomiaFlows/dht.py","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"exec dht.py","x":410,"y":380,"wires":[["b7532d9c.cb1d"],[],[]]},{"id":"b7532d9c.cb1d","type":"json","z":"f15c88c3.1d8bf8","name":"","property":"payload","action":"","pretty":false,"x":550,"y":380,"wires":[["f7bfa123.1606a","48d47a68.cab214"]]},{"id":"fba1f3f.623161","type":"ui_chart","z":"f15c88c3.1d8bf8","name":"GraficaLux","group":"6596af46.e8855","order":2,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"4000","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":990,"y":220,"wires":[[]]},{"id":"beb1392d.f6c8d8","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.lux","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":180,"wires":[["bf933862.6fde18","fba1f3f.623161","3aabbf65.f1a2a","2206ff26.f8fc3"]]},{"id":"2206ff26.f8fc3","type":"ui_text","z":"f15c88c3.1d8bf8","group":"6596af46.e8855","order":1,"width":0,"height":0,"name":"","label":"Lux","format":"{{msg.payload}}","layout":"row-spread","x":1010,"y":180,"wires":[]},{"id":"1656bd16.ac13d3","type":"ui_chart","z":"f15c88c3.1d8bf8","name":"GraficaTemp","group":"e930afe6.376a6","order":2,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":990,"y":420,"wires":[[]]},{"id":"4f57bcf6.c07214","type":"ui_chart","z":"f15c88c3.1d8bf8","name":"GraficaHum","group":"e930afe6.376a6","order":4,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":990,"y":520,"wires":[[]]},{"id":"ed5b5768.c798d8","type":"ui_text","z":"f15c88c3.1d8bf8","group":"e930afe6.376a6","order":1,"width":0,"height":0,"name":"","label":"Temperatura","format":"{{msg.payload}}","layout":"row-spread","x":990,"y":380,"wires":[]},{"id":"8b622653.51d7b8","type":"ui_text","z":"f15c88c3.1d8bf8","group":"e930afe6.376a6","order":3,"width":0,"height":0,"name":"","label":"Humedad","format":"{{msg.payload}}","layout":"row-spread","x":1000,"y":480,"wires":[]},{"id":"f7bfa123.1606a","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.t","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":380,"wires":[["1e6e578c.996338"]]},{"id":"48d47a68.cab214","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.h","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":480,"wires":[["4cc795b6.76142c"]]},{"id":"c44dd0f6.885a6","type":"inject","z":"f15c88c3.1d8bf8","name":"Cada 30s","topic":"","payload":"","payloadType":"date","repeat":"30","crontab":"","once":true,"onceDelay":"5","x":210,"y":660,"wires":[["c811a442.5f6148"]]},{"id":"c811a442.5f6148","type":"exec","z":"f15c88c3.1d8bf8","command":"python3 -u /home/pi/.node-red/projects/DisplayErgonomiaFlows/uv.py","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"exec uv.py","x":410,"y":660,"wires":[["96e990e7.d9156"],[],[]]},{"id":"96e990e7.d9156","type":"json","z":"f15c88c3.1d8bf8","name":"","property":"payload","action":"","pretty":false,"x":550,"y":660,"wires":[["ebd095df.c82df8","8b41cc13.9739f"]]},{"id":"2e26db16.c66bb4","type":"ui_chart","z":"f15c88c3.1d8bf8","name":"GraficaVoltsUV","group":"6596af46.e8855","order":4,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0.9","ymax":"3.1","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":980,"y":680,"wires":[[]]},{"id":"b8a4ef49.b6301","type":"ui_chart","z":"f15c88c3.1d8bf8","name":"GraficaIntUV","group":"6596af46.e8855","order":6,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"16","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":990,"y":760,"wires":[[]]},{"id":"6d094df7.a95c34","type":"ui_text","z":"f15c88c3.1d8bf8","group":"6596af46.e8855","order":3,"width":0,"height":0,"name":"","label":"VoltsUV","format":"{{msg.payload}}","layout":"row-spread","x":1000,"y":640,"wires":[]},{"id":"69002579.f2d9ec","type":"ui_text","z":"f15c88c3.1d8bf8","group":"6596af46.e8855","order":5,"width":0,"height":0,"name":"mW/cm2","label":"Intensidad mW/cm2","format":"{{msg.payload}}","layout":"row-spread","x":1000,"y":720,"wires":[]},{"id":"ebd095df.c82df8","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.v","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":640,"wires":[["5c2db7f5.bb9b08"]]},{"id":"8b41cc13.9739f","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.i","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":720,"wires":[["b8a4ef49.b6301","9a189cbb.946a3"]]},{"id":"5916cd03.7d0844","type":"comment","z":"f15c88c3.1d8bf8","name":"Medicion de luz","info":"","x":200,"y":120,"wires":[]},{"id":"50a31185.dc823","type":"comment","z":"f15c88c3.1d8bf8","name":"Medicion de Humedad y Temperatura","info":"","x":270,"y":320,"wires":[]},{"id":"377f8256.1e1b3e","type":"inject","z":"cf4eb861.964c88","name":"","topic":"","payload":"0.789","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":260,"wires":[["ae109425.541998","4167817d.cd5c5"]]},{"id":"d68bdefb.2596d","type":"inject","z":"cf4eb861.964c88","name":"","topic":"","payload":"green","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":140,"wires":[["89bb9876.262388"]]},{"id":"ba96e3c9.ea3e3","type":"inject","z":"cf4eb861.964c88","name":"Blancoverde","topic":"","payload":"0,272,100,150,100","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":830,"y":300,"wires":[["89bb9876.262388"]]},{"id":"d2fb3db1.65a25","type":"change","z":"cf4eb861.964c88","name":"Color for Temp","rules":[{"t":"set","p":"col","pt":"msg","to":"colTemp","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":140,"wires":[["29a01286.52e89e"]]},{"id":"e9c02d1b.374c9","type":"change","z":"cf4eb861.964c88","name":"Color for Hum","rules":[{"t":"set","p":"col","pt":"msg","to":"colHum","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":180,"wires":[["9f728678.a35e98"]]},{"id":"5551f27b.22f20c","type":"change","z":"cf4eb861.964c88","name":"Color for UV","rules":[{"t":"set","p":"col","pt":"msg","to":"colUV","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":220,"wires":[["69fb09a0.acd498"]]},{"id":"ae109425.541998","type":"change","z":"cf4eb861.964c88","name":"Color for DB","rules":[{"t":"set","p":"col","pt":"msg","to":"colDB","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":260,"wires":[["51ba956f.687a6c"]]},{"id":"51f00b56.1030f4","type":"change","z":"cf4eb861.964c88","name":"Color for LUX","rules":[{"t":"set","p":"col","pt":"msg","to":"colLUX","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":300,"wires":[["b23dbe62.90be7"]]},{"id":"4167817d.cd5c5","type":"change","z":"cf4eb861.964c88","name":"Color for PPM","rules":[{"t":"set","p":"col","pt":"msg","to":"colPPM","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":340,"wires":[["5bd24565.8318dc"]]},{"id":"a230ace1.2e296","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"colTemp","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":320,"wires":[[]]},{"id":"d86407e6.4c1c38","type":"inject","z":"f15c88c3.1d8bf8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1430,"y":320,"wires":[["a230ace1.2e296"]]},{"id":"c80a3d64.f54cb","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"colHum","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":360,"wires":[[]]},{"id":"da447f94.7a55a","type":"inject","z":"f15c88c3.1d8bf8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1430,"y":360,"wires":[["c80a3d64.f54cb"]]},{"id":"6e75a2a.4b3c35c","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"colUV","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1620,"y":400,"wires":[[]]},{"id":"4604c736.0914e8","type":"inject","z":"f15c88c3.1d8bf8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1430,"y":400,"wires":[["6e75a2a.4b3c35c"]]},{"id":"8dede79a.8ec7d8","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"colDB","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1620,"y":440,"wires":[[]]},{"id":"457198.58245e68","type":"inject","z":"f15c88c3.1d8bf8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1430,"y":440,"wires":[["8dede79a.8ec7d8"]]},{"id":"db3826ad.46b4b8","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"colLUX","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":480,"wires":[[]]},{"id":"e007d077.15cdb","type":"inject","z":"f15c88c3.1d8bf8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1430,"y":480,"wires":[["db3826ad.46b4b8"]]},{"id":"5e2f52ca.c3440c","type":"change","z":"f15c88c3.1d8bf8","name":"","rules":[{"t":"set","p":"colPPM","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":520,"wires":[[]]},{"id":"12488b59.ae6535","type":"inject","z":"f15c88c3.1d8bf8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1430,"y":520,"wires":[["5e2f52ca.c3440c"]]},{"id":"1e6e578c.996338","type":"function","z":"f15c88c3.1d8bf8","name":"Round","func":"var round = Math.round((msg.payload + Number.EPSILON) * 100) / 100\nmsg.payload = round;\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":380,"wires":[["1656bd16.ac13d3","ed5b5768.c798d8","14643d39.4cfb63","c36172ea.32c34"]]},{"id":"4cc795b6.76142c","type":"function","z":"f15c88c3.1d8bf8","name":"Round","func":"var round = Math.round((msg.payload + Number.EPSILON) * 100) / 100\nmsg.payload = round;\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":480,"wires":[["4f57bcf6.c07214","8b622653.51d7b8","e26e5d3b.d4b0c","9b31a9b4.06a368"]]},{"id":"5c2db7f5.bb9b08","type":"function","z":"f15c88c3.1d8bf8","name":"Round","func":"var round = Math.round((msg.payload + Number.EPSILON) * 100) / 100\nmsg.payload = round;\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":640,"wires":[["6d094df7.a95c34","2e26db16.c66bb4","9f80c57e.e2d2f8"]]},{"id":"9a189cbb.946a3","type":"function","z":"f15c88c3.1d8bf8","name":"Round","func":"var round = Math.round((msg.payload + Number.EPSILON) * 100) / 100\nmsg.payload = round;\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":720,"wires":[["69002579.f2d9ec","f2a2906.b84b07","9ca4ef8a.4b8cc"]]},{"id":"3aabbf65.f1a2a","type":"link out","z":"f15c88c3.1d8bf8","name":"fromLUXMedicion","links":["eb213b73.3b0638","dd11de36.7610b"],"x":1095,"y":180,"wires":[]},{"id":"14643d39.4cfb63","type":"link out","z":"f15c88c3.1d8bf8","name":"fromTemMedicion","links":["9cd65b44.ed8698","1bfbe753.4e36b9"],"x":1095,"y":380,"wires":[]},{"id":"e26e5d3b.d4b0c","type":"link out","z":"f15c88c3.1d8bf8","name":"fromHUMMedicion","links":["e0de2691.ad3918","4a7d6b19.e3e4a4"],"x":1095,"y":480,"wires":[]},{"id":"f2a2906.b84b07","type":"link out","z":"f15c88c3.1d8bf8","name":"fromIntensUVMedicion","links":["d26fc708.005768"],"x":1095,"y":720,"wires":[]},{"id":"4dd36f90.6fc09","type":"comment","z":"f15c88c3.1d8bf8","name":"Medicion de UV","info":"","x":200,"y":600,"wires":[]},{"id":"dd11de36.7610b","type":"link in","z":"cf4eb861.964c88","name":"toLuxNeoDisplay","links":["3aabbf65.f1a2a"],"x":235,"y":300,"wires":[["51f00b56.1030f4"]]},{"id":"1bfbe753.4e36b9","type":"link in","z":"cf4eb861.964c88","name":"toTempNeoDisplay","links":["14643d39.4cfb63"],"x":235,"y":140,"wires":[["d2fb3db1.65a25"]]},{"id":"4a7d6b19.e3e4a4","type":"link in","z":"cf4eb861.964c88","name":"toHumNeoDisplay","links":["e26e5d3b.d4b0c"],"x":235,"y":180,"wires":[["e9c02d1b.374c9"]]},{"id":"d26fc708.005768","type":"link in","z":"cf4eb861.964c88","name":"toUVNeoDisplay","links":["a54f3ce9.21c06","f2a2906.b84b07","9f80c57e.e2d2f8"],"x":235,"y":220,"wires":[["5551f27b.22f20c"]]},{"id":"bf933862.6fde18","type":"debug","z":"f15c88c3.1d8bf8","name":"lux","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1180,"y":180,"wires":[]},{"id":"c36172ea.32c34","type":"debug","z":"f15c88c3.1d8bf8","name":"temp","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1190,"y":380,"wires":[]},{"id":"9b31a9b4.06a368","type":"debug","z":"f15c88c3.1d8bf8","name":"hum","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1190,"y":480,"wires":[]},{"id":"9ca4ef8a.4b8cc","type":"debug","z":"f15c88c3.1d8bf8","name":"uv","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1190,"y":720,"wires":[]},{"id":"9f80c57e.e2d2f8","type":"link out","z":"f15c88c3.1d8bf8","name":"fromVoltsUVMedicion","links":["d26fc708.005768"],"x":1095,"y":640,"wires":[]}]